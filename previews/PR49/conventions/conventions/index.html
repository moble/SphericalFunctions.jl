<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Conventions Â· SphericalFunctions.jl</title><meta name="title" content="Conventions Â· SphericalFunctions.jl"/><meta property="og:title" content="Conventions Â· SphericalFunctions.jl"/><meta property="twitter:title" content="Conventions Â· SphericalFunctions.jl"/><meta name="description" content="Documentation for SphericalFunctions.jl."/><meta property="og:description" content="Documentation for SphericalFunctions.jl."/><meta property="twitter:description" content="Documentation for SphericalFunctions.jl."/><meta property="og:url" content="https://moble.github.io/SphericalFunctions.jl/stable/conventions/conventions/"/><meta property="twitter:url" content="https://moble.github.io/SphericalFunctions.jl/stable/conventions/conventions/"/><link rel="canonical" href="https://moble.github.io/SphericalFunctions.jl/stable/conventions/conventions/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SphericalFunctions.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../transformations/"><span>$s$</span>-SHT Transformations</a></li><li><a class="tocitem" href="../../wigner_matrices/">Wigner&#39;s <span>$ğ”‡$</span> and <span>$d$</span> matrices</a></li><li><a class="tocitem" href="../../sYlm/"><span>${}_{s}Y_{\ell,m}$</span> functions</a></li><li><a class="tocitem" href="../../operators/">Differential operators</a></li><li><a class="tocitem" href="../../utilities/">Utilities</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../internal/">Internal functions</a></li><li><a class="tocitem" href="../../functions/">Complete function list</a></li></ul></li><li><span class="tocitem">Conventions</span><ul><li class="is-active"><a class="tocitem" href>Conventions</a><ul class="internal"><li><a class="tocitem" href="#Three-dimensional-space"><span>Three-dimensional space</span></a></li><li><a class="tocitem" href="#Four-dimensional-space:-Quaternions-and-rotations"><span>Four-dimensional space: Quaternions and rotations</span></a></li><li><a class="tocitem" href="#Rotations"><span>Rotations</span></a></li><li><a class="tocitem" href="#Euler-angles-and-spherical-coordinates"><span>Euler angles and spherical coordinates</span></a></li></ul></li><li><a class="tocitem" href="../comparisons/">Comparisons</a></li></ul></li><li><span class="tocitem">Notes</span><ul><li><a class="tocitem" href="../../notes/H_recursions/">Algorithm for computing <span>$H$</span></a></li><li><a class="tocitem" href="../../notes/sampling_theorems/">Sampling theorems and transformations of spin-weighted spherical harmonics</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Conventions</a></li><li class="is-active"><a href>Conventions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Conventions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/moble/SphericalFunctions.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/moble/SphericalFunctions.jl/blob/main/docs/src/conventions/conventions.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ï„</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Conventions"><a class="docs-heading-anchor" href="#Conventions">Conventions</a><a id="Conventions-1"></a><a class="docs-heading-anchor-permalink" href="#Conventions" title="Permalink"></a></h1><p>Here, we work through all the conventions used in this package, starting from first principles to motivate the choices and ensure that each step is on firm footing.</p><h2 id="Three-dimensional-space"><a class="docs-heading-anchor" href="#Three-dimensional-space">Three-dimensional space</a><a id="Three-dimensional-space-1"></a><a class="docs-heading-anchor-permalink" href="#Three-dimensional-space" title="Permalink"></a></h2><p>The space we are working in is naturally three-dimensional Euclidean space, so we start with a <a href="https://en.wikipedia.org/wiki/Right-hand_rule">right-handed</a> Cartesian coordinate system <span>$(x, y, z)$</span>.  These also give us the unit basis vectors <span>$(ğ±, ğ², ğ³)$</span>.  Note that these basis vectors are assumed to have unit norm, but we omit the hats just to keep the notation simple.  Any vector in this space can be written as</p><p class="math-container">\[\mathbf{v} = v_x \mathbf{ğ±} + v_y \mathbf{ğ²} + v_z \mathbf{ğ³},\]</p><p>in which case the Euclidean norm is given by</p><p class="math-container">\[\| \mathbf{v} \| = \sqrt{v_x^2 + v_y^2 + v_z^2}.\]</p><p>Equivalently, we can write the components of the Euclidean metric as</p><p class="math-container">\[g_{ij} = \left( \begin{array}{ccc}
  1 &amp; 0 &amp; 0 \\
  0 &amp; 1 &amp; 0 \\
  0 &amp; 0 &amp; 1
\end{array} \right)_{ij}.\]</p><p>Note that, because the points of the space are in one-to-one correspondence with the vectors, we will frequently use a vector to label a point in space.</p><p>We will be working on the sphere, so it will be very convenient to use spherical coordinates <span>$(r, \theta, \phi)$</span>.  We choose the standard &quot;physics&quot; conventions for these, in which we relate to the Cartesian coordinates by</p><p class="math-container">\[\begin{aligned}
r &amp;= \sqrt{x^2 + y^2 + z^2} &amp;&amp;\in [0, \infty), \\
\theta &amp;= \arccos\left(\frac{z}{r}\right) &amp;&amp;\in [0, \pi], \\
\phi &amp;= \arctan\left(\frac{y}{x}\right) &amp;&amp;\in [0, 2\pi),
\end{aligned}\]</p><p>where we assume the <span>$\arctan$</span> in the expression for <span>$\phi$</span> is really the two-argument form that gives the correct quadrant.  The inverse transformation is given by</p><p class="math-container">\[\begin{aligned}
x &amp;= r \sin\theta \cos\phi, \\
y &amp;= r \sin\theta \sin\phi, \\
z &amp;= r \cos\theta.
\end{aligned}\]</p><p>We can use this to find the components of the metric in spherical coordinates:</p><p class="math-container">\[g_{i&#39;j&#39;}
= \sum_{i,j} \frac{\partial x^i}{\partial x^{i&#39;}} \frac{\partial x^j}{\partial x^{j&#39;}} g_{ij}
= \left( \begin{array}{ccc}
  1 &amp; 0 &amp; 0 \\
  0 &amp; r^2 &amp; 0 \\
  0 &amp; 0 &amp; r^2 \sin^2\theta
\end{array} \right)_{i&#39;j&#39;}.\]</p><p>The unit coordinate vectors in spherical coordinates are then</p><p class="math-container">\[\begin{aligned}
\mathbf{ğ«} &amp;= \sin\theta \cos\phi \mathbf{ğ±} + \sin\theta \sin\phi \mathbf{ğ²} + \cos\theta \mathbf{ğ³}, \\
\boldsymbol{\theta} &amp;= \cos\theta \cos\phi \mathbf{ğ±} + \cos\theta \sin\phi \mathbf{ğ²} - \sin\theta \mathbf{ğ³}, \\
\boldsymbol{\phi} &amp;= -\sin\phi \mathbf{ğ±} + \cos\phi \mathbf{ğ²},
\end{aligned}\]</p><p>where, again, we omit the hats on the unit vectors to keep the notation simple.</p><p>One seemingly obvious â€” but extremely important â€” fact is that the unit basis frame <span>$(ğ±, ğ², ğ³)$</span> can be rotated onto <span>$(\boldsymbol{\theta}, \boldsymbol{\phi}, \mathbf{r})$</span> by first rotating through the &quot;polar&quot; angle <span>$\theta$</span> about the <span>$\mathbf{y}$</span> axis, and then through the &quot;azimuthal&quot; angle <span>$\phi$</span> about the <span>$\mathbf{z}$</span> axis.  This becomes important when we consider spin-weighted functions.</p><p>Integration in Cartesian coordinates is, of course, trivial as</p><p class="math-container">\[\int f\, d^3\mathbf{r} = \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} f\, dx\, dy\, dz.\]</p><p>In spherical coordinates, the integrand involves the square-root of the determinant of the metric, so we have</p><p class="math-container">\[\int f\, d^3\mathbf{r} = \int_0^\infty \int_0^\pi \int_0^{2\pi} f\, r^2 \sin\theta\, dr\, d\theta\, d\phi.\]</p><p>Restricting to the unit sphere, and normalizing so that the integral of 1 over the sphere is 1, we can simplify this to</p><p class="math-container">\[\int f\, d^2\Omega = \frac{1}{4\pi} \int_0^\pi \int_0^{2\pi} f\, \sin\theta\, d\theta\, d\phi.\]</p><h2 id="Four-dimensional-space:-Quaternions-and-rotations"><a class="docs-heading-anchor" href="#Four-dimensional-space:-Quaternions-and-rotations">Four-dimensional space: Quaternions and rotations</a><a id="Four-dimensional-space:-Quaternions-and-rotations-1"></a><a class="docs-heading-anchor-permalink" href="#Four-dimensional-space:-Quaternions-and-rotations" title="Permalink"></a></h2><p>Given the basis vectors <span>$(ğ±, ğ², ğ³)$</span> and the Euclidean norm, we can define the <a href="https://en.wikipedia.org/wiki/Geometric_algebra">geometric algebra</a>.  The key feature is the geometric product, which is defined for any pair of vectors as <span>$ğ¯$</span> and <span>$ğ°$</span> as</p><p class="math-container">\[ğ¯ ğ° = ğ¯ â‹… ğ° + ğ¯ âˆ§ ğ°,\]</p><p>where the dot product is the usual scalar product and the wedge product is the antisymmetric part of the tensor product â€”Â acting just like the standard <a href="https://en.wikipedia.org/wiki/Exterior_algebra">exterior product</a> from the algebra of <a href="https://en.wikipedia.org/wiki/Differential_form">differential forms</a>.  The geometric product is associative, distributive, and has the property that</p><p class="math-container">\[ğ¯ğ¯ = \| ğ¯ \|^2.\]</p><p>The basis for this entire space is then the set</p><p class="math-container">\[\begin{gather}
ğŸ, \\
ğ±, ğ², ğ³,\\
ğ±ğ², ğ±ğ³, ğ²ğ³, \\
ğ±ğ²ğ³.
\end{gather}\]</p><p>It&#39;s useful to note that the first four of these square to 1, while the last four square to -1 â€” meaning that they could serve as a unit imaginary to generate the complex numbers.  The more standard symbols â€” and the ones we will use â€” are</p><p class="math-container">\[\begin{gather}
ğŸ, \\
ğ±, ğ², ğ³,\\
ğ¢, ğ£, ğ¤, \\
ğˆ.
\end{gather}\]</p><p>The interpretation of these is that <span>$ğŸ$</span> represents the scalars; <span>$ğ±, ğ², ğ³$</span> span the vectors; <span>$ğ¢, ğ£, ğ¤$</span> are the standard quaternion components; and <span>$ğˆ$</span> is the pseudoscalar, which can also serve as the <a href="https://en.wikipedia.org/wiki/Hodge_star_operator">Hodge dual</a>.  (Note that quaternions will only be spanned by elements made from an even number of the basis vectors.  It turns out that those with an odd number will produce reflections, rather than rotations, when acting on a vector â€” as discussed below.  This explains why quaternions are restricted to just those elements with an even number to represent rotations.  For details see any geometric algebra text, like <a href="../../references/#DoranLasenby_2010">Doran and Lasenby</a>.)</p><p>The key expressions that help to determine the arbitrary choices we have made thus far are the multiplications</p><p class="math-container">\[\begin{aligned}
ğ¢ ğ£ &amp;= ğ¤, \\
ğ£ ğ¤ &amp;= ğ¢, \\
ğ¤ ğ¢ &amp;= ğ£.
\end{aligned}\]</p><p>Everyone agrees that <span>$ğ¢Â² = ğ£Â² = ğ¤Â² = -1$</span>, so we can also use the rules above to determine <span>$ğ¢ğ£ğ¤ = -ğŸ$</span>.  Different conventions are sometimes used (almost exclusively in aerospace) so that this last equation and the three displayed above have a flipped sign.  See <a href="../../references/#SommerEtAl_2018">Sommer et al.</a> for a discussion of the different conventions.</p><p>We use coordinates <span>$(W, X, Y, Z)$</span> on the space of quaternions, so that such a quaternion would be written as</p><p class="math-container">\[WğŸ + Xğ¢ + Yğ£ + Zğ¤,\]</p><p>though we usually omit the <span>$ğŸ$</span>.  As with standard three-dimensional space, we could introduce spherical coordinates, though we use a slight variant: extended Euler coordinates.  In our conventions, we have</p><p class="math-container">\[\begin{aligned}
R &amp;= \sqrt{W^2 + X^2 + Y^2 + Z^2} &amp;&amp;\in [0, \infty), \\
\alpha &amp;= \arctan\frac{Z}{W} + \arctan\frac{-X}{Y} &amp;&amp;\in [0, 2\pi], \\
\beta &amp;= 2\arccos\sqrt{\frac{W^2+Z^2}{W^2+X^2+Y^2+Z^2}} &amp;&amp;\in [0, 2\pi), \\
\gamma &amp;= \arctan\frac{Z}{W} - \arctan\frac{-X}{Y} &amp;&amp;\in [0, 2\pi],
\end{aligned}\]</p><p>where we again assume the <span>$\arctan$</span> in the expressions for <span>$\alpha$</span> and <span>$\gamma$</span> is really the two-argument form that gives the correct quadrant.  Note that here, <span>$\beta$</span> ranges up to <span>$2\pi$</span> rather than just <span>$\pi$</span>, as in the standard Euler angles.  This is because we are describing the space of quaternions, rather than just the space of rotations.  If we restrict to <span>$R=1$</span>, we have exactly the group of unit quaternions <span>$\mathrm{Spin}(3)=\mathrm{SU}(2)$</span>, which is a double cover of the rotation group <span>$\mathrm{SO}(3)$</span>. This extended range for <span>$\beta$</span> is necessary to cover the entire space of quaternions; if we further restrict to <span>$[0, \pi)$</span>, we would cover the space of rotations.  This and the inclusion of <span>$R$</span> identify precisely how this coordinate system extends the standard Euler angles.</p><p>The inverse transformation is given by</p><p class="math-container">\[\begin{aligned}
  W &amp;= R\, \cos\frac{Î²}{2} \cos\frac{Î±+Î³}{2}, \\
  X &amp;= -R\, \sin\frac{Î²}{2} \sin\frac{Î±-Î³}{2}, \\
  Y &amp;= R\, \sin\frac{Î²}{2} \cos\frac{Î±-Î³}{2}, \\
  Z &amp;= R\, \cos\frac{Î²}{2} \sin\frac{Î±+Î³}{2}.
\end{aligned}\]</p><p>As with the spherical coordinates, we can use this to find the components of the metric in our extended Euler coordinates:</p><p class="math-container">\[g_{i&#39;j&#39;}
= \sum_{i,j} \frac{\partial X^i}{\partial X^{i&#39;}} \frac{\partial X^j}{\partial X^{j&#39;}} g_{ij}
= \left( \begin{array}{cccc}
  1 &amp; 0 &amp; 0 &amp; 0 \\
  0 &amp; \frac{R^2}{4} &amp; 0 &amp; \frac{R^2 \cos\beta}{4} \\
  0 &amp; 0 &amp; \frac{R^2}{4} &amp; 0 \\
  0 &amp; \frac{R^2 \cos\beta}{4} &amp; 0 &amp; \frac{R^2}{4}
\end{array} \right)_{i&#39;j&#39;}.\]</p><p>Again, integration involves a square-root of the determinant of the metric, which reduces to <span>$R^3 |\sin\beta| / 8$</span>.</p><p class="math-container">\[\int f\, d^4ğ‘
= \int_{-\infty}^\infty \int_{-\infty}^\infty \int_{-\infty}^\infty \int_{-\infty}^\infty f\, dW\, dX\, dY\, dZ
= \int_0^\infty \int_0^{2\pi} \int_0^{2\pi} \int_0^{2\pi} f\, \frac{R^3}{8} |\sin Î²|\, dR\, dÎ±\, dÎ²\, dÎ³.\]</p><p>Restricting to the unit sphere, and normalizing so that the integral of 1 over the sphere is 1, we can simplify this to</p><p class="math-container">\[\int f\, d^3\Omega = \frac{1}{16\pi^2} \int_0^{2\pi} \int_0^{2\pi} \int_0^{2\pi} f\, |\sin Î²|\, dÎ±\, dÎ²\, dÎ³.\]</p><h2 id="Rotations"><a class="docs-heading-anchor" href="#Rotations">Rotations</a><a id="Rotations-1"></a><a class="docs-heading-anchor-permalink" href="#Rotations" title="Permalink"></a></h2><h2 id="Euler-angles-and-spherical-coordinates"><a class="docs-heading-anchor" href="#Euler-angles-and-spherical-coordinates">Euler angles and spherical coordinates</a><a id="Euler-angles-and-spherical-coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#Euler-angles-and-spherical-coordinates" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../functions/">Â« Complete function list</a><a class="docs-footer-nextpage" href="../comparisons/">Comparisons Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 12 December 2024 17:00">Thursday 12 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
